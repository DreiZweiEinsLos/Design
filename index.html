<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Eva Burkhardt</title>
  <style>
    body {
      background-color: #111;
      color: #ccc;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      font-size: 20px;
      line-height: 1.5;
    }

    #text-container {
      max-width: none;
      margin: 0;
      white-space: normal;
      word-break: break-word;
    }

    .block {
      margin-bottom: 40px;
      transition: opacity 1s ease;
    }

    .verblasst {
      opacity: 0.4;
    }

    .verzoegert-link {
      opacity: 0;
      pointer-events: none;
      text-decoration: none;
      transition: opacity 0.5s ease, text-decoration 0.3s ease;
      color: #ccc;
    }

    .verzoegert-link.aktiv {
      opacity: 1;
      pointer-events: auto;
      text-decoration: underline;
      cursor: pointer;
    }

    .treppe-container {
      position: relative;
    }

    .treppen-zeile {
      position: absolute;
      left: calc(var(--index) * 10px);
      bottom: calc(var(--index) * 1.2em);
    }

    @media (max-width: 600px) {
      body {
        font-size: 18px;
      }

      #text-container {
        max-width: 600px;
        margin: 0 auto;
      }

      .treppen-zeile {
        position: static !important;
        left: auto !important;
        bottom: auto !important;
      }

      .treppe-container {
        height: auto !important;
      }
    }
  </style>
</head>
<body>
  <div id="text-container"></div>

  <script>
    const textBloecke = [
      `HALLO.\nICH BIN EVA.\nINDUSTRIE & SERVICE DESIGNERIN.\n15+ JAHRE <span class="verzoegert-link" data-url="https://www.linkedin.com/in/evaburkhardt/">ERFAHRUNG</span>.`,
      `TREPPE:\nDU WILLST DEINE KUNDEN BEWUSST ANSPRECHEN?\nDEIN PRODUKT &/ DIE TOUCHPOINTS NEU DENKEN?\nDAS ERLEBNIS VERSTEHEN UND DESIGNEN?`,
      `WAS BRAUCHST DU?\n   FREELANCE DESIGN ARBEIT\n   WORKSHOPS\n   COACHING`,
      `<span class="verzoegert-link" data-url="mailto:evaburkhardt.mail@gmail.com">SCHREIB MIR.</span>`
    ];

    const schreibDelay = 35;
    const zeilenPause = 2000;
    const blockPause = 1500;
    const pauseNachErsterZeile = 800;

    const container = document.getElementById("text-container");
    const istMobil = window.innerWidth <= 600;

    function schreibeBlock(text, callback) {
      const div = document.createElement("div");
      div.classList.add("block");
      container.appendChild(div);

      let pos = 0;
      let tempHTML = "";
      let zeilenZaehler = 0;

      function tippen() {
        if (pos >= text.length) {
          const linkSpan = div.querySelector(".verzoegert-link");
          if (linkSpan) {
            linkSpan.classList.add("aktiv");
            linkSpan.onclick = () => window.open(linkSpan.dataset.url, "_blank");
          }
          if (callback) callback();
          return;
        }

        const char = text[pos];

        if (char === "<") {
          const endTagPos = text.indexOf(">", pos);
          if (endTagPos === -1) {
            tempHTML += text.slice(pos);
            pos = text.length;
            div.innerHTML = tempHTML;
            tippen();
            return;
          }
          const tagContent = text.slice(pos, endTagPos + 1);
          tempHTML += tagContent;
          pos = endTagPos + 1;
          div.innerHTML = tempHTML;
        } else if (char === "\n") {
          tempHTML += "<br>";
          pos++;
          zeilenZaehler++;
          div.innerHTML = tempHTML;

          if (zeilenZaehler === 1) {
            setTimeout(tippen, pauseNachErsterZeile);
            return;
          }
        } else {
          tempHTML += char;
          pos++;
          div.innerHTML = tempHTML;
        }

        setTimeout(tippen, schreibDelay);
      }

      tippen();
    }

    function zeigeTreppe(textBlock, callback) {
      const zeilen = textBlock.split("\n");

      if (istMobil) {
        schreibeBlock(zeilen.join("\n"), callback);
        return;
      }

      const containerDiv = document.createElement("div");
      containerDiv.classList.add("block", "treppe-container");
      containerDiv.style.height = `calc(${zeilen.length} * 1.44em)`;
      container.appendChild(containerDiv);

      function tippeZeile(text, index, cb) {
        const zeile = document.createElement("div");
        zeile.classList.add("treppen-zeile");
        zeile.style.setProperty("--index", index);
        containerDiv.appendChild(zeile);

        let i = 0;
        function tippen() {
          if (i < text.length) {
            zeile.textContent += text[i];
            i++;
            setTimeout(tippen, schreibDelay);
          } else {
            cb && cb();
          }
        }
        tippen();
      }

      let i = 0;
      function baueZeile() {
        if (i < zeilen.length) {
          tippeZeile(zeilen[i], i, () => {
            setTimeout(baueZeile, zeilenPause);
          });
          i++;
        } else {
          callback && callback();
        }
      }

      baueZeile();
    }

    function zeigeBlock(index) {
      if (index > 0) {
        const vorheriger = container.children[index - 1];
        vorheriger.classList.add("verblasst");
      }

      if (index < textBloecke.length) {
        const blockText = textBloecke[index];

        if (blockText.startsWith("TREPPE:\n")) {
          const treppenText = blockText.replace("TREPPE:\n", "");
          zeigeTreppe(treppenText, () => {
            setTimeout(() => zeigeBlock(index + 1), blockPause);
          });
        } else {
          schreibeBlock(blockText, () => {
            setTimeout(() => zeigeBlock(index + 1), blockPause);
          });
        }
      }
    }

    window.onload = () => zeigeBlock(0);
  </script>
</body>
</html>
