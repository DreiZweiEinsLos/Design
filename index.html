<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Text mit getippter Treppe</title>
  <style>
    body {
      background-color: #111;
      color: #fff;
      font-family: Helvetica, Arial, sans-serif;
      font-size: 22px;
      padding: 50px;
    }
    .block {
      white-space: pre-wrap;
      margin-bottom: 1.5em;
      transition: color 1s;
      line-height: 1.44em;
    }
    .verblasst {
      color: #666;
    }
    .cursor::after {
      content: "|";
      animation: blink 1s steps(1) infinite;
      margin-left: 5px;
    }
    @keyframes blink {
      50% {
        opacity: 0;
      }
    }
    .treppe-container {
      position: relative;
      height: 7.2em;
      margin-bottom: 3em;
    }
    .treppen-zeile {
      position: absolute;
      white-space: nowrap;
    }
    .verzoegert-link {
      text-decoration: none;
      color: inherit;
      cursor: default;
      transition: all 0.3s;
    }
    .verzoegert-link.aktiv {
      text-decoration: underline;
      color: white;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="text-container"></div>

  <script>
    const textBloecke = [
      `HALLO.\nICH BIN EVA.\nINDUSTRIE & SERVICE DESIGNERIN.\n15+ JAHRE <span class="verzoegert-link" data-url="https://www.linkedin.com/in/evaburkhardt/">ERFAHRUNG</span>.\n`,
      `TREPPE:\nDU WILLST DEINE KUNDEN KLAR ANSPRECHEN?\n DEIN PRODUKT GEZIELT WEITERENTWICKELN?\n WICHTIGE SERVICE-TOUCHPOINTS OPTIMIEREN?\n DAS KUNDENERLEBNIS IN DEN MITTELPUNKT STELLEN?`,
      `WO STEHST DU GERADE?\n... WIR MACHEN RESEARCH.\n... WIR HABEN EINE IDEE.\n... WIR ARBEITEN AM DESIGN.`,
      `WAS BRAUCHST DU?\n> FREELANCE DESIGN ARBEIT\n> WORKSHOPS\n> COACHING`,
      `SCHREIB MIR JETZT.`
    ];

    const schreibDelay = 35;
    const zeilenPause = 2000;
    const blockPause = 1500;

    const container = document.getElementById("text-container");

    function schreibeBlock(text, callback) {
      const div = document.createElement("div");
      div.classList.add("block", "cursor");
      container.appendChild(div);

      let pos = 0;
      let tempHTML = "";

      function tippen() {
        if (pos >= text.length) {
          div.classList.remove("cursor");
          // Nach 1 Sekunde Link aktivieren
          setTimeout(() => {
            const linkSpan = div.querySelector(".verzoegert-link");
            if (linkSpan) {
              linkSpan.classList.add("aktiv");
              linkSpan.onclick = () => window.open(linkSpan.dataset.url, "_blank");
            }
          }, 1000);

          if (callback) callback();
          return;
        }

        const char = text[pos];

        if (char === "<") {
          // Ganzes Tag am Stück einfügen
          const endTagPos = text.indexOf(">", pos);
          if (endTagPos === -1) {
            tempHTML += text.slice(pos);
            pos = text.length;
            div.innerHTML = tempHTML;
            tippen();
            return;
          }
          const tagContent = text.slice(pos, endTagPos + 1);
          tempHTML += tagContent;
          pos = endTagPos + 1;
          div.innerHTML = tempHTML;
        } else if (char === "\n") {
          tempHTML += "<br>";
          pos++;
          div.innerHTML = tempHTML;
        } else {
          tempHTML += char;
          pos++;
          div.innerHTML = tempHTML;
        }

        setTimeout(tippen, schreibDelay);
      }

      tippen();
    }

    function tippeTreppeZeile(zeileText, containerDiv, index, callback) {
      const zeile = document.createElement("div");
      zeile.classList.add("treppen-zeile");
      zeile.style.bottom = `${index * 1.44}em`;
      zeile.style.left = `${index * 2}em`;
      containerDiv.appendChild(zeile);

      let i = 0;
      function tippen() {
        if (i < zeileText.length) {
          zeile.textContent += zeileText[i];
          i++;
          setTimeout(tippen, schreibDelay);
        } else {
          callback && callback();
        }
      }
      tippen();
    }

    function zeigeTreppe(textBlock, callback) {
      const zeilen = textBlock.split("\n");
      const containerDiv = document.createElement("div");
      containerDiv.classList.add("block", "treppe-container");
      container.appendChild(containerDiv);

      let i = 0;
      function baueZeile() {
        if (i < zeilen.length) {
          tippeTreppeZeile(zeilen[i], containerDiv, i, () => {
            setTimeout(baueZeile, zeilenPause);
          });
          i++;
        } else {
          callback && callback();
        }
      }
      baueZeile();
    }

    function zeigeBlock(index) {
      if (index > 0) {
        const vorheriger = container.children[index - 1];
        vorheriger.classList.add("verblasst");
      }

      if (index < textBloecke.length) {
        const blockText = textBloecke[index];

        if (blockText.startsWith("TREPPE:\n")) {
          const treppenText = blockText.replace("TREPPE:\n", "");
          zeigeTreppe(treppenText, () => {
            setTimeout(() => zeigeBlock(index + 1), blockPause);
          });
        } else {
          schreibeBlock(blockText, () => {
            setTimeout(() => zeigeBlock(index + 1), blockPause);
          });
        }
      }
    }

    window.onload = () => zeigeBlock(0);
  </script>
</body>
</html>
